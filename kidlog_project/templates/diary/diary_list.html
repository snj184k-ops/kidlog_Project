{% extends "base.html" %} {% load static %} {% block content %}

<div class="container mt-4">
    <h3 class="mb-3">ğŸ“” éå»ã®æ—¥è¨˜ä¸€è¦§</h3>

    <!-- æœˆåˆ¥ã‚¿ãƒ– -->
    <ul class="nav nav-tabs mb-3" id="monthTabs" role="tablist">
        {% for month, records in diary_by_month.items %}
        <li class="nav-item" role="presentation">
            <button class="nav-link {% if forloop.first %}active{% endif %}" id="tab-{{ month }}" data-bs-toggle="tab" data-bs-target="#content-{{ month }}" type="button" role="tab">
        {{ month }}
        </button>
        </li>
        {% empty %}
        <li class="nav-item text-muted">æ—¥è¨˜ãŒã¾ã ã‚ã‚Šã¾ã›ã‚“ã€‚</li>
        {% endfor %}
    </ul>

    <!-- æœˆåˆ¥ã‚¿ãƒ–å†…å®¹ -->
    <div class="tab-content" id="monthTabsContent">
        {% for month, records in diary_by_month.items %}
        <div class="tab-pane fade {% if forloop.first %}show active{% endif %}" id="content-{{ month }}" role="tabpanel">
            {% for record in records %}
            <div class="card mb-2 shadow-sm">
                <div class="card-body d-flex justify-content-between align-items-center">
                    <div>
                        <h6 class="mb-1 text-muted">{{ record.time|date:"Yå¹´mæœˆdæ—¥ H:i" }}</h6>
                        <h6 class="mb-1">è¦ç´„ï¼š{{ record.summary }}</h6>
                        <p class="mb-1">å†…å®¹ï¼š{{ record.note|truncatechars:50 }}</p>
                    </div>
                    <div>
                        <a href="{% url 'diary_edit' child.id record.id %}" class="btn btn-sm btn-outline-primary me-2">ç¢ºèªãƒ»å¤‰æ›´</a>
                        <form method="post" action="{% url 'diary_delete' child.id record.id %}" style="display:inline;">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-sm btn-outline-danger">å‰Šé™¤</button>
                        </form>

                    </div>
                </div>
            </div>
            {% empty %}
            <p class="text-muted">ã“ã®æœˆã«ã¯è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
            {% endfor %}
        </div>
        {% endfor %}
    </div>


    <!-- æ–°è¦è¿½åŠ  -->
    <div class="text-end mt-4">
        <a href="{% url 'diary_add' child.id %}" class="btn btn-success">ï¼‹ æ–°ã—ã„æ—¥è¨˜ã‚’è¿½åŠ </a>
        <a href="{% url 'dashboard' child.id %}" class="btn btn-secondary">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¸æˆ»ã‚‹</a>
    </div>
</div>

{% endblock %}